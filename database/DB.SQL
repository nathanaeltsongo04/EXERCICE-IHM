DELIMITER //
CREATE PROCEDURE Upsert_TFONCTION (
    IN p_CODEFONCTION INT,
    IN p_DESIGNATION VARCHAR(25)
)
BEGIN
    DECLARE row_count INT;

    SELECT COUNT(*) INTO row_count FROM TFONCTION WHERE CODEFONCTION = p_CODEFONCTION;

    IF row_count > 0 THEN
        UPDATE TFONCTION SET DESIGNATION = p_DESIGNATION WHERE CODEFONCTION = p_CODEFONCTION;
    ELSE
        INSERT INTO TFONCTION (CODEFONCTION, DESIGNATION) VALUES (p_CODEFONCTION, p_DESIGNATION);
    END IF;
END//
DELIMITER ;
===============================================
DELIMITER //
CREATE PROCEDURE Upsert_TUTILISATEUR (
    IN p_CODEUTILISATEUR INT,
    IN p_NOM VARCHAR(25),
    IN p_POSTNOM VARCHAR(25),
    IN p_PRENOM VARCHAR(25),
    IN p_ADRESSE VARCHAR(25),
    IN p_REFFONCTION INT
)
BEGIN
    DECLARE row_count INT;

    SELECT COUNT(*) INTO row_count FROM TUTILISATEUR WHERE CODEUTILISATEUR = p_CODEUTILISATEUR;

    IF row_count > 0 THEN
        UPDATE TUTILISATEUR SET NOM = p_NOM, POSTNOM = p_POSTNOM, PRENOM = p_PRENOM, ADRESSE = p_ADRESSE, REFFONCTION = p_REFFONCTION WHERE CODEUTILISATEUR = p_CODEUTILISATEUR;
    ELSE
        INSERT INTO TUTILISATEUR (CODEUTILISATEUR, NOM, POSTNOM, PRENOM, ADRESSE, REFFONCTION) VALUES (p_CODEUTILISATEUR, p_NOM, p_POSTNOM, p_PRENOM, p_ADRESSE, p_REFFONCTION);
    END IF;
END//
DELIMITER ;
==================================================
DELIMITER //
CREATE PROCEDURE Upsert_TCOMPTE (
    IN p_CODECOMPTE INT,
    IN p_REFUTILISATEUR INT,
    IN p_USERNAME VARCHAR(25),
    IN p_MOTDEPASS VARCHAR(25)
)
BEGIN
    DECLARE row_count INT;

    SELECT COUNT(*) INTO row_count FROM TCOMPTE WHERE CODECOMPTE = p_CODECOMPTE;

    IF row_count > 0 THEN
        UPDATE TCOMPTE SET REFUTILISATEUR = p_REFUTILISATEUR, USERNAME = p_USERNAME, MOTDEPASS = p_MOTDEPASS WHERE CODECOMPTE = p_CODECOMPTE;
    ELSE
        INSERT INTO TCOMPTE (CODECOMPTE, REFUTILISATEUR, USERNAME, MOTDEPASS) VALUES (p_CODECOMPTE, p_REFUTILISATEUR, p_USERNAME, p_MOTDEPASS);
    END IF;
END//
DELIMITER ;
